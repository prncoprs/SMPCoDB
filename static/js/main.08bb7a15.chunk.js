(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[2],{471:function(e,t,n){},739:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(105),c=n.n(o),s=(n(471),n(472),n(12)),i=n.n(s),l=n(277),u=n(0),d=n(1),b=n(5),j=n(6),h=n(7),v=n(306),g=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getURL",value:function(e){return new URL(e,"https://cwvf54ckb6.execute-api.ap-east-1.amazonaws.com/dev/").href}},{key:"generateHover",value:function(e,t,n,a){if(!a)return{range:e,contents:[]};var r,o=JSON.parse(a),c=Object(h.a)(o);try{for(c.s();!(r=c.n()).done;){var s=r.value;if(n.toLowerCase().includes(s.table_name.toLowerCase()))return{range:e,contents:[{value:"Table Name"}]};var i,l=Object(h.a)(s.columns);try{for(l.s();!(i=l.n()).done;){var u=i.value;if(n.toLocaleLowerCase().includes(u.name.toLowerCase()))return{range:e,contents:[{value:s.table_name},{value:"**Type: ".concat(u.column_type,"**")}]}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){c.e(d)}finally{c.f()}}},{key:"generateSuggestions",value:function(e,t){if(t){var n,a=JSON.parse(t),r=[],o=Object(h.a)(a);try{for(o.s();!(n=o.n()).done;){var c=n.value;r.push({label:c.table_name,kind:v.a.CompletionItemKind.Constant,documentation:"",insertText:c.table_name.toUpperCase(),insertTextRules:v.a.CompletionItemInsertTextRule.InsertAsSnippet,range:e});var s,i=Object(h.a)(c.columns);try{for(i.s();!(s=i.n()).done;){var l=s.value;r.push({label:l.name,kind:v.a.CompletionItemKind.Constant,documentation:"",insertText:l.name,insertTextRules:v.a.CompletionItemInsertTextRule.InsertAsSnippet,range:e})}}catch(u){i.e(u)}finally{i.f()}}}catch(u){o.e(u)}finally{o.f()}return r}return[]}}]),e}(),m=n(359),p=n.n(m),f=n(49),x=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(e){var a,r,o;Object(u.a)(this,n),(o=t.call(this,e)).setFunctionName=function(e){o.setState({functionName:e})},o.setDatabase=function(e){o.setState({databaseName:e})},o.setBackend=function(e){o.setState({backend:e}),localStorage.setItem("backend",e)},o.post=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.setState({result:void 0}),t=g.getURL("generate"),e.next=4,p.a.post(t,{sql:o.state.code,table:o.state.tableStructure,functionName:o.state.functionName});case 4:n=e.sent,o.setState({result:n.data});case 6:case"end":return e.stop()}}),e)}))),o.postDB=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.setState({result:void 0}),t=g.getURL("generate_db"),"true"!==localStorage.getItem("createDB")){e.next=5;break}return e.next=5,o.createDB();case 5:return e.next=7,p.a.post(t,{sql:o.state.code,table:o.state.tableStructure,database:o.state.databaseName,functionName:o.state.functionName});case 7:n=e.sent,o.setState({result:n.data});case 9:case"end":return e.stop()}}),e)}))),o.createDB=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("createScript"),n=g.getURL("create_db"),e.next=4,p.a.post(n,{data:t});case 4:case"end":return e.stop()}}),e)}))),o.setCode=function(e){o.setState({code:e}),window.localStorage.setItem("code",e)},o.setTable=function(e){o.setState({tableStructure:e}),window.localStorage.setItem("tableStructure",e)};var c=null!==(a=localStorage.getItem("backend"))&&void 0!==a?a:"python",s="true"===localStorage.getItem("createDB")&&null!==(r=localStorage.getItem("dbName"))&&void 0!==r?r:void 0;return o.state={setCode:o.setCode,setBackend:o.setBackend,backend:c,setTable:o.setTable,post:o.post,setDatabase:o.setDatabase,postDB:o.postDB,setFunctionName:o.setFunctionName,databaseName:s},o}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=window.localStorage.getItem("code"),t=window.localStorage.getItem("tableStructure");this.setState({code:null!==e&&void 0!==e?e:"",tableStructure:null!==t&&void 0!==t?t:""})}},{key:"render",value:function(){return Object(f.jsx)(C.Provider,{value:this.state,children:this.props.children})}}]),n}(a.Component),O={},C=r.a.createContext(O),S=n(23),y=n(383),k=n(746),w=n(284),N=n(194),I=n(749),T=n(748),L=n(282),B=n(461),D=n(382),F=n.n(D),P=n(305),R=n(166),U=n(384),_=n(750),q=n(462),E=n(751),H=n(455),A=n(450),J=n.n(A);function z(){var e=r.a.useContext(C).result;return Object(f.jsx)("div",{style:{height:500,width:1e3},children:e&&Object(f.jsx)(J.a,{data:e.joinGraph,orientation:"vertical",pathFunc:"step",translate:{y:100,x:400},nodeSize:{x:257,y:175}})})}var G=n(454),K=n.n(G),M=n(453),Q=n.n(M);function W(){var e=r.a.useContext(C).result;return Object(f.jsxs)(k.a,{children:[Object(f.jsx)(Q.a,{level:5,children:"Table with errors"}),Object(f.jsx)("ul",{children:null===e||void 0===e?void 0:e.errorTables.map((function(e){return Object(f.jsx)("li",{children:Object(f.jsx)(K.a,{children:e})},e)}))})]})}var Y=k.a.Title;k.a.Paragraph,k.a.Text,k.a.Link;function V(){var e=r.a.useContext(C).result,t=r.a.useState(!1),n=Object(S.a)(t,2),a=n[0],o=n[1],c=r.a.useState(!1),s=Object(S.a)(c,2);s[0],s[1];return r.a.useEffect((function(){o(!1)}),[e]),Object(f.jsxs)(I.a,{style:{width:"100%",height:"90vh",overflow:"scroll"},children:[Object(f.jsx)(_.a,{style:{position:"fixed",top:110,right:40},children:Object(f.jsxs)(w.a,{gutter:[10,10],children:[Object(f.jsx)(N.a,{children:Object(f.jsx)(L.a,{onClick:function(){var t;navigator.clipboard.writeText(null!==(t=null===e||void 0===e?void 0:e.code)&&void 0!==t?t:""),o(!0)},children:a?"Copied":"Copy"})}),Object(f.jsx)(N.a,{children:Object(f.jsx)(q.a,{content:Object(f.jsx)(z,{}),placement:"leftBottom",trigger:"click",children:Object(f.jsx)(L.a,{children:"Show Join Tree"})})})]})}),Object(f.jsx)(k.a,{children:Object(f.jsx)(Y,{children:"Result"})}),!1===(null===e||void 0===e?void 0:e.isFreeConnex)&&Object(f.jsx)(q.a,{content:Object(f.jsx)(W,{}),children:Object(f.jsx)(E.a,{type:"error",style:{marginBottom:10},message:"Cannot auto generate a free connex join tree from query. Check the join tree and reorder your join statement."})}),Object(f.jsx)(U.a,Object(R.a)(Object(R.a)({},U.b),{},{code:e.code,language:"cpp",theme:H.a,children:function(e){var t=e.className,n=e.style,a=e.tokens,r=e.getLineProps,o=e.getTokenProps;return Object(f.jsx)("pre",{className:t,style:n,children:a.map((function(e,t){return Object(f.jsx)("div",Object(R.a)(Object(R.a)({},r({line:e,key:t})),{},{children:e.map((function(e,t){return Object(f.jsx)("span",Object(R.a)({},o({token:e,key:t})))}))}))}))})}}))]})}var X=n(747),Z=n(745),$=n(744),ee=n(374),te=n.n(ee),ne=n(325),ae=n.n(ne),re=X.a.Option;function oe(){var e=r.a.useState(!1),t=Object(S.a)(e,2),n=t[0],a=t[1],o=r.a.useState(""),c=Object(S.a)(o,2),s=c[0],i=c[1],l=r.a.useState(!1),u=Object(S.a)(l,2),d=u[0],b=u[1],j=r.a.useState(""),h=Object(S.a)(j,2),v=h[0],g=h[1],m=Z.a.useForm(),p=(Object(S.a)(m,1)[0],r.a.useContext(C)),x=p.setBackend,O=p.backend,y=p.setDatabase,k=Object(f.jsxs)(X.a,{value:O,style:{width:200},onChange:function(e){return x(e)},children:[Object(f.jsx)(re,{value:"python",children:"Use Default Backend"}),Object(f.jsx)(re,{value:"db",children:"Use Query Plan"})]}),w="python"==O?[k]:[k,Object(f.jsx)(L.a,{type:"primary",onClick:function(){var e,t;i(null!==(e=localStorage.getItem("createScript"))&&void 0!==e?e:""),b("true"===localStorage.getItem("createDB")),g(null!==(t=localStorage.getItem("dbName"))&&void 0!==t?t:""),a(!0)},children:"Settings"})];return Object(f.jsxs)("div",{children:[Object(f.jsx)($.a,{title:"CodeGen",extra:w}),Object(f.jsxs)(ae.a,{visible:n,title:"Database settings",onCancel:function(){return a(!1)},onOk:function(){localStorage.setItem("createScript",s),localStorage.setItem("createDB",!0===d?"true":"false"),localStorage.setItem("dbName",v),y(d?void 0:v),a(!1)},children:[d&&Object(f.jsx)("div",{style:{height:500},children:Object(f.jsx)(P.a,{value:s,options:{minimap:{enabled:!1}},onChange:function(e){return i(null!==e&&void 0!==e?e:"")},language:"sql"})}),Object(f.jsx)(te.a,{value:d,onChange:function(e){b(e.target.checked)},children:"Create database"}),d,!d&&Object(f.jsx)(T.a,{placeholder:"Database Name",value:v,onChange:function(e){return g(e.target.value)}})]})]})}var ce=y.a.TabPane,se=k.a.Link;function ie(){var e=r.a.useState(window.innerHeight),t=Object(S.a)(e,2),n=t[0],a=t[1],o=r.a.useState(!1),c=Object(S.a)(o,2),s=c[0],u=c[1];r.a.useEffect((function(){window.addEventListener("resize",(function(){a(window.innerHeight)}))}),[]);var d=r.a.useContext(C),b=d.setCode,j=d.setTable,h=d.code,v=d.tableStructure,m=d.result,p=d.post,x=d.postDB,O=d.backend,R=d.functionName,U=d.setFunctionName,_=r.a.useCallback((function(e){e.languages.registerCompletionItemProvider("sql",{provideCompletionItems:function(e,t){var n=e.getWordUntilPosition(t),a={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:n.startColumn,endColumn:n.endColumn};if(v)return{suggestions:g.generateSuggestions(a,v)}}}),e.languages.registerHoverProvider("sql",{provideHover:function(e,t){var n,a=e.getWordAtPosition(t),r={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:null===a||void 0===a?void 0:a.startColumn,endColumn:null===a||void 0===a?void 0:a.endColumn};return g.generateHover(r,e,null!==(n=null===a||void 0===a?void 0:a.word)&&void 0!==n?n:"",v)}})}),[v]);return Object(f.jsxs)(F.a,{style:{height:"100vh",overflow:"hidden",padding:10},children:[Object(f.jsx)(oe,{}),Object(f.jsx)(D.Content,{style:{height:"100%"},children:Object(f.jsxs)(w.a,{style:{height:"80%"},gutter:[16,10],children:[Object(f.jsx)(N.a,{span:8,children:Object(f.jsxs)(I.a,{children:[Object(f.jsxs)(y.a,{defaultActiveKey:"0",onChange:function(){},children:[Object(f.jsx)(ce,{tab:"Function Info",children:Object(f.jsx)(T.a,{value:R,placeholder:"Function Name",onChange:function(e){U(e.target.value)}})},"0"),Object(f.jsx)(ce,{tab:"SQL Statement",children:Object(f.jsx)(P.a,{height:n-300,beforeMount:function(e){_(e)},language:"sql",value:h,options:{minimap:{enabled:!1}},onChange:function(e){e&&b(e)}})},"1"),Object(f.jsxs)(ce,{tab:"Table structure",children:[Object(f.jsx)(k.a,{children:Object(f.jsx)(se,{target:"_blank",href:"https://github.com/sirily11/SECYAN-GEN/blob/master/examples/table_config.json",children:"Example Table Structure"})}),Object(f.jsx)(P.a,{height:n-300,value:v,language:"json",options:{minimap:{enabled:!1}},onChange:function(e){e&&j(e)}})]},"2")]}),Object(f.jsx)(w.a,{style:{justifyContent:"flex-end",marginTop:10},children:Object(f.jsx)(L.a,{type:"primary",loading:s,onClick:Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),0!==(null===h||void 0===h?void 0:h.length)&&0!==(null===v||void 0===v?void 0:v.length)){e.next=5;break}return window.alert("Invaild Input"),u(!1),e.abrupt("return");case 5:if(e.prev=5,"python"!=O){e.next=11;break}return e.next=9,p();case 9:e.next=13;break;case 11:return e.next=13,x();case 13:B.a.info({message:"Code generated"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),B.a.error({message:"Cannot generate code",description:"".concat(null===e.t0||void 0===e.t0||null===(t=e.t0.response)||void 0===t?void 0:t.data),duration:5});case 19:return e.prev=19,u(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,16,19,22]])}))),children:"Convert"})})]})}),Object(f.jsx)(N.a,{span:16,children:m&&Object(f.jsx)(V,{})})]})})]})}var le=function(){return Object(f.jsx)(x,{children:Object(f.jsx)(ie,{})})},ue=function(e){e&&e instanceof Function&&n.e(75).then(n.bind(null,823)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(le,{})}),document.getElementById("root")),ue()}},[[739,3,4]]]);
//# sourceMappingURL=main.08bb7a15.chunk.js.map