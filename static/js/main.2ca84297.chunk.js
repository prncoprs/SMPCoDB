(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[2],{468:function(e,t,n){},842:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(61),r=n.n(c),o=(n(468),n(15)),s=n(379),l=n(133),u=n(894),d=n(901),j=n(331),b=n(909),h=n(910),f=(n(577),n(450)),m=n(906),p=n(907),x=n(908),g=n(32),O=i.a.createContext({});function v(e){var t=e.children,n=i.a.useState([]),a=Object(o.a)(n,2),c=a[0],r=a[1],s=i.a.useState(!1),l=Object(o.a)(s,2),u=l[0],d=l[1];i.a.useEffect((function(){var e=localStorage.getItem("tableStructure");null!==e&&r(JSON.parse(e))}),[]),i.a.useEffect((function(){localStorage.setItem("tableStructure",JSON.stringify(c))}),[c]);var j=i.a.useCallback((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];localStorage.setItem("tableStructure",JSON.stringify(e)),t&&r(JSON.parse(JSON.stringify(e)))}),[c]),b={configs:c,setConfigs:j,setOpenRawConfigDialog:d,openRawConfigDialog:u};return Object(g.jsx)(O.Provider,{value:b,children:t})}var C=n(414),y=n(896),k=n(216),w=n(897),S=n(899),_={$schema:"http://json-schema.org/draft-06/schema#",type:"array",items:{$ref:"#/definitions/TableConfigElement"},definitions:{TableConfigElement:{type:"object",additionalProperties:!1,properties:{data_sizes:{type:"array",items:{type:"integer"}},data_paths:{type:"array",items:{type:"string"}},table_name:{type:"string"},owner:{type:"string"},columns:{type:"array",items:{$ref:"#/definitions/Column"}}},required:["columns","data_sizes","table_name"],title:"TableConfigElement"},Column:{type:"object",additionalProperties:!1,properties:{column_type:{type:"string"},name:{type:"string"}},required:["column_type","name"],title:"Column"}}};function R(){var e=i.a.useContext(O),t=e.setOpenRawConfigDialog,n=e.openRawConfigDialog,a=e.configs,c=e.setConfigs,r=i.a.useState(""),s=Object(o.a)(r,2),l=s[0],u=s[1],d=i.a.useCallback((function(){u(JSON.stringify(a,null,4)),t(!0)}),[a]),j=i.a.useCallback((function(){c(JSON.parse(l)),t(!1)}),[l]),b=i.a.useCallback((function(e){e.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,enableSchemaRequest:!0,schemas:[{uri:"https://raw.githubusercontent.com/sirily11/SECYAN-GEN/master/examples/table_config.json",fileMatch:["*"],schema:_}]})}),[l]);return Object(g.jsxs)(y.a,{title:"Table Configuration",subTitle:"Config your table's info here",extra:[Object(g.jsx)(k.a,{type:"primary",onClick:d,children:"Set Raw Data"})],children:[Object(g.jsxs)(w.a,{style:{maxWidth:"800px"},children:["You can either use the raw Data Config Editor to modify your database table's infomation, or use the GUI below to modify your table. You can check this"," ",Object(g.jsx)(w.a.Link,{target:"_blank",href:"https://github.com/sirily11/SECYAN-GEN/blob/master/examples/table_config.json",children:"Link"})," ","for example table configuration."]}),Object(g.jsx)(S.a,{title:"Raw Data Configuration",visible:n,onOk:j,onCancel:j,footer:[Object(g.jsx)(k.a,{onClick:j,children:"Close"})],width:.8*window.innerWidth,children:Object(g.jsx)(C.a,{height:500,language:"json",options:{minimap:{enabled:!1}},beforeMount:function(e){return b(e)},value:l,onChange:function(e){u(null!==e&&void 0!==e?e:"")}})})]})}var I=n(153),N=n(452),T=n(544),E=n(895),L=n(221),z=n(900),D=n(898),A=n(902),J=n(545),q=n(903),P=n(546),B=["int","string","decimal","date"],K=["CLIENT","SERVER"];function M(e){var t,n=e.config,a=e.index,c=i.a.useState(n.table_name),r=Object(o.a)(c,2),s=r[0],l=r[1],u=i.a.useState(n.owner),b=Object(o.a)(u,2),h=b[0],f=b[1],m=i.a.useState(!1),p=Object(o.a)(m,2),x=p[0],v=p[1],C=i.a.useContext(O),y=C.setConfigs,_=C.configs,R=i.a.useCallback((function(){for(var e,t,a,i,c=Math.max(null!==(e=null===n||void 0===n||null===(t=n.data_paths)||void 0===t?void 0:t.length)&&void 0!==e?e:0,null!==(a=null===n||void 0===n||null===(i=n.data_sizes)||void 0===i?void 0:i.length)&&void 0!==a?a:0),r=Array.from(Array(c)).map((function(e){return{size:void 0,path:void 0}})),o=0;o<c;o++){var s,l,u,d;return(null!==(s=null===n||void 0===n||null===(l=n.data_sizes)||void 0===l?void 0:l.length)&&void 0!==s?s:0<o)&&(r[o].size=n.data_sizes[o]),(null!==(u=null===n||void 0===n||null===(d=n.data_paths)||void 0===d?void 0:d.length)&&void 0!==u?u:0<o)&&(r[o].path=n.data_paths[o]),{path_size:r,columns:n.columns}}}),[n]),M=i.a.useCallback((function(){_[a].table_name=s,_[a].owner=h,y(_),v(!1)}),[s,h]),F=i.a.useCallback((function(e){var t=e.path_size.filter((function(e){return void 0!==e}));_[a].data_sizes=t.map((function(e){return parseInt(e.size)})),_[a].data_paths=t.map((function(e){return e.path})),_[a].columns=e.columns,y(_,!1)}),[n]),V=i.a.useCallback((function(){S.a.confirm({title:"confirm",content:"Delete this table",onOk:function(){_.splice(a,1),y(JSON.parse(JSON.stringify(_))),T.a.success({message:"Table deleted",placement:"bottomRight"})}})}),[n]);return Object(g.jsxs)(d.a,{id:n.table_name,title:"".concat(n.table_name," - ").concat(null!==(t=n.owner)&&void 0!==t?t:"Client"),style:{margin:10},extra:[Object(g.jsx)(k.a,{shape:"circle",onClick:V,style:{marginRight:10},children:Object(g.jsx)(A.a,{})}),Object(g.jsx)(k.a,{shape:"circle",onClick:function(){return v(!0)},children:Object(g.jsx)(J.a,{})})],children:[Object(g.jsxs)(E.a,{initialValues:R(),onValuesChange:function(e,t){F(t)},children:[Object(g.jsx)(w.a.Title,{level:5,children:"Data Sizes and Paths"}),Object(g.jsx)(E.a.List,{name:"path_size",children:function(e,t){var n=t.add,a=t.remove;return Object(g.jsxs)(j.a,{gutter:[10,10],children:[e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,c=Object(N.a)(e,["key","name","fieldKey"]);return Object(g.jsx)(L.a,{style:{display:"flex",marginBottom:8},xs:24,md:12,children:Object(g.jsxs)(j.a,{style:{width:"100%"},gutter:[20,10],children:[Object(g.jsx)(L.a,{md:10,xs:24,children:Object(g.jsx)(E.a.Item,Object(I.a)(Object(I.a)({},c),{},{name:[n,"size"],fieldKey:[i,"size"],rules:[{required:!0,message:"Data Size is required"}],children:Object(g.jsx)(z.a,{placeholder:"Data size",type:"number"})}))}),Object(g.jsx)(L.a,{md:12,xs:22,children:Object(g.jsx)(E.a.Item,Object(I.a)(Object(I.a)({},c),{},{name:[n,"path"],fieldKey:[i,"path"],rules:[{required:!0,message:"Data Path is required"}],children:Object(g.jsx)(z.a,{placeholder:"Data path"})}))}),Object(g.jsx)(L.a,{span:2,children:Object(g.jsx)(q.a,{className:"dynamic-delete-button",onClick:function(){return a(n)}})})]})},"path_size-".concat(t))})),Object(g.jsx)(L.a,{xs:24,children:Object(g.jsx)(E.a.Item,{children:Object(g.jsx)(k.a,{type:"dashed",onClick:function(){return n()},block:!0,icon:Object(g.jsx)(P.a,{}),children:"Add Data Path and Size"})})})]})}}),Object(g.jsx)(w.a.Title,{level:5,children:"Table Columns"}),Object(g.jsx)(E.a.List,{name:"columns",children:function(e,t){var n=t.add,a=t.remove;return Object(g.jsxs)(j.a,{gutter:[10,10],children:[e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,c=Object(N.a)(e,["key","name","fieldKey"]);return Object(g.jsx)(L.a,{style:{display:"flex",marginBottom:8},xs:24,children:Object(g.jsxs)(j.a,{style:{width:"100%"},gutter:[20,10],children:[Object(g.jsx)(L.a,{md:5,xs:24,children:Object(g.jsx)(E.a.Item,Object(I.a)(Object(I.a)({},c),{},{name:[n,"column_type"],fieldKey:[i,"type"],rules:[{required:!0,message:"Column type is required"}],children:Object(g.jsx)(D.a,{children:B.map((function(e,t){return Object(g.jsx)(D.a.Option,{value:e,children:e})}))})}))}),Object(g.jsx)(L.a,{md:5,xs:22,children:Object(g.jsx)(E.a.Item,Object(I.a)(Object(I.a)({},c),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0,message:"Column name is required"}],children:Object(g.jsx)(z.a,{placeholder:"Column Name"})}))}),Object(g.jsx)(L.a,{span:2,children:Object(g.jsx)(q.a,{onClick:function(){return a(n)}})})]})},"column-".concat(t))})),Object(g.jsx)(L.a,{xs:24,children:Object(g.jsx)(E.a.Item,{children:Object(g.jsx)(k.a,{type:"dashed",onClick:function(){return n()},block:!0,icon:Object(g.jsx)(P.a,{}),children:"Add Column"})})})]})}})]}),Object(g.jsxs)(S.a,{visible:x,title:"Table name",onCancel:function(){l(n.table_name),f(n.owner),v(!1)},onOk:M,children:[Object(g.jsx)(z.a,{placeholder:"Table name",value:s,onChange:function(e){l(e.target.value)}}),Object(g.jsx)(D.a,{style:{width:"100%",marginTop:20},placeholder:"Select Owner",value:h,onChange:function(e){return f(e)},children:K.map((function(e){return Object(g.jsx)(D.a.Option,{value:e,children:e},e)}))})]})]},n.table_name)}var F=n(396),V=n.n(F);function U(){var e=i.a.useContext(O),t=e.configs,n=(e.setConfigs,i.a.useState(!1)),a=Object(o.a)(n,2),c=(a[0],a[1],i.a.useState(!0)),r=Object(o.a)(c,2),s=r[0],u=r[1],d=Object(l.g)(),j=V.a.parse(d.search);return i.a.useEffect((function(){setTimeout((function(){u(!1)}),50)}),[]),i.a.useEffect((function(){var e=j.table;if(e){var t=document.getElementById(e);null===t||void 0===t||t.scrollIntoView()}}),[d.search,s]),Object(g.jsxs)("div",{style:{overflowY:"scroll",height:"100%"},children:[Object(g.jsx)(R,{}),!s&&t.map((function(e,t){return Object(g.jsx)(M,{config:e,index:t},"config-".concat(t))}))]})}var G=n(449),H=n(12),Y=n.n(H),W=n(397),$=n(532),Q=n.n($),X=n(7),Z=n(1),ee=n(2),te=n(290),ne=[{keyword:"select",desc:""},{keyword:"from",desc:""},{keyword:"where",desc:""},{keyword:"sum",desc:"Aggregation function"},{keyword:"max",desc:"Aggregation function"},{keyword:"avg",desc:"Aggregation function"},{keyword:"count",desc:"Aggregation function"},{keyword:"group by",desc:""},{keyword:"desc",desc:""},{keyword:"limit",desc:""},{keyword:"having",desc:""},{keyword:"exists",desc:""}],ae=function(){function e(){Object(Z.a)(this,e)}return Object(ee.a)(e,null,[{key:"getURL",value:function(e){return new URL(e,"https://cwvf54ckb6.execute-api.ap-east-1.amazonaws.com/dev/").href}},{key:"generateHover",value:function(e,t,n,a){if(!a)return{range:e,contents:[]};var i,c=Object(X.a)(ne);try{for(c.s();!(i=c.n()).done;){var r=i.value;if(n.toLowerCase().includes(r.keyword.toLowerCase()))return{range:e,contents:[{value:"SQL Built In"},{value:r.desc}]}}}catch(b){c.e(b)}finally{c.f()}var o,s=Object(X.a)(a);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(n.toLowerCase().includes(l.table_name.toLowerCase()))return{range:e,contents:[{value:"Table Name"}]};var u,d=Object(X.a)(l.columns);try{for(d.s();!(u=d.n()).done;){var j=u.value;if(n.toLocaleLowerCase().includes(j.name.toLowerCase()))return{range:e,contents:[{value:l.table_name},{value:"**Type: ".concat(j.column_type,"**")}]}}}catch(b){d.e(b)}finally{d.f()}}}catch(b){s.e(b)}finally{s.f()}}},{key:"generateSuggestions",value:function(e,t){if(t){var n,a=[],i=Object(X.a)(t);try{for(i.s();!(n=i.n()).done;){var c=n.value;a.push({label:c.table_name,kind:te.a.CompletionItemKind.Constant,documentation:"",insertText:c.table_name.toUpperCase(),insertTextRules:te.a.CompletionItemInsertTextRule.InsertAsSnippet,range:e});var r,o=Object(X.a)(c.columns);try{for(o.s();!(r=o.n()).done;){var s=r.value;a.push({label:s.name,kind:te.a.CompletionItemKind.Constant,documentation:"".concat(s.column_type),insertText:s.name,insertTextRules:te.a.CompletionItemInsertTextRule.InsertAsSnippet,range:e})}}catch(j){o.e(j)}finally{o.f()}}}catch(j){i.e(j)}finally{i.f()}var l,u=Object(X.a)(ne);try{for(u.s();!(l=u.n()).done;){var d=l.value;a.push({label:d.keyword,kind:te.a.CompletionItemKind.Keyword,document:d.desc,insertText:d.keyword.toUpperCase(),insertTextRules:te.a.CompletionItemInsertTextRule.InsertAsSnippet,range:e})}}catch(j){u.e(j)}finally{u.f()}return a}return[]}}]),e}(),ie=i.a.createContext({});function ce(e){var t=e.children,n=i.a.useState([]),a=Object(o.a)(n,2),c=a[0],r=a[1],s=i.a.useState(!1),l=Object(o.a)(s,2),u=l[0],d=l[1],j=i.a.useState(0),b=Object(o.a)(j,2),h=b[0],f=b[1],m=i.a.useState(!1),p=Object(o.a)(m,2),x=p[0],O=p[1];i.a.useEffect((function(){var e=localStorage.getItem("code");if(e)try{r(JSON.parse(e))}catch(t){console.log("No Code Saved")}}),[]);var v=i.a.useCallback((function(e){localStorage.setItem("code",JSON.stringify(e)),r(JSON.parse(JSON.stringify(e)))}),[c]),C=i.a.useCallback(function(){var e=Object(W.a)(Y.a.mark((function e(t,n){var a,i,r,o,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ae.getURL("/generate_python"),i=c[t],e.prev=2,d(!0),e.next=6,Q.a.post(a,{sql:i.code,annotation_name:i.annotation_name,num_of_rows:i.num_of_rows,table:JSON.stringify(n)});case 6:r=e.sent,c[t].result=r.data,v(c),T.a.info({message:"Code results returned",placement:"bottomRight"}),d(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),d(!1),T.a.error({message:"Cannot generate code",description:"".concat(null!==(o=null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.data)&&void 0!==o?o:"Cannot connect to the backend"),duration:5,placement:"bottomRight"});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),[c]),y=i.a.useCallback((function(){c.forEach((function(e){e.result=void 0})),v(c)}),[c]),k={codeRunResults:c,setCodeRunResults:v,runCode:C,isLoading:u,index:h,setIndex:f,showEdit:x,setShowEdit:O,deleteResultCache:y};return Object(g.jsx)(ie.Provider,{value:k,children:t})}var re=i.a.createContext({});function oe(e){var t=i.a.useState("Server"),n=Object(o.a)(t,2),a=n[0],c=n[1],r=i.a.useState("Default Backend"),s=Object(o.a)(r,2),l=s[0],u=s[1];i.a.useEffect((function(){var e=localStorage.getItem("role"),t=localStorage.getItem("");e&&c(e),t&&u(t)}),[]);var d={role:a,setRole:i.a.useCallback((function(e){localStorage.setItem("role",e),c(e)}),[]),backend:l,setBackend:i.a.useCallback((function(e){localStorage.setItem("backend",e),u(e)}),[])};return Object(g.jsx)(re.Provider,{value:d,children:e.children})}var se=n(533),le=void 0,ue=void 0;function de(e){var t=e.codeRunResult,n=e.index,a=i.a.useContext(ie),c=a.setCodeRunResults,r=a.codeRunResults,s=(a.showEdit,a.setShowEdit,i.a.useState(!0)),l=Object(o.a)(s,2),u=l[0],d=l[1],b=i.a.useContext(O).configs,h=i.a.useContext(re).role,f=i.a.useState(),m=Object(o.a)(f,2),p=m[0],x=m[1];i.a.useEffect((function(){return function(){var e,t;null===(e=le)||void 0===e||e.dispose(),null===(t=ue)||void 0===t||t.dispose()}}),[]);var v=i.a.useCallback((function(e){ue=e.languages.registerCompletionItemProvider("sql",{provideCompletionItems:function(e,t){var n=e.getWordUntilPosition(t),a={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:n.startColumn,endColumn:n.endColumn};if(b)return{suggestions:ae.generateSuggestions(a,b)}}}),le=e.languages.registerHoverProvider("sql",{provideHover:function(e,t){var n,a=e.getWordAtPosition(t),i={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:null===a||void 0===a?void 0:a.startColumn,endColumn:null===a||void 0===a?void 0:a.endColumn};return ae.generateHover(i,e,null!==(n=null===a||void 0===a?void 0:a.word)&&void 0!==n?n:"",b)}})}),[b,p]);i.a.useEffect((function(){T.a.info({message:"Loading Data",placement:"bottomRight"})}),[]);var y=i.a.useCallback((function(e){r[n].code=e,c(r)}),[t]);return Object(g.jsx)("div",{style:{padding:10},children:Object(g.jsxs)(j.a,{gutter:[10,10],children:[Object(g.jsx)(L.a,{xs:8,children:Object(g.jsx)(C.a,{value:t.code,onMount:function(e){x(e),d(!1),T.a.close("Data Loaded")},language:"sql",beforeMount:function(e){return v(e)},options:{minimap:{enabled:!1}},height:"calc(100vh - 64px - 56px - 20px)",onChange:function(e){y(e)}})}),Object(g.jsx)(L.a,{xs:16,style:{overflowY:"scroll",overflowX:"scroll",height:"100%"},children:Object(g.jsx)("div",{style:{height:"calc(100vh - 64px - 56px - 30px)",overflowY:"hidden"},children:t.result&&!u&&Object(g.jsx)(se.a,{columns:function(){var e,n,a,i="Server"===h?null===(e=t.result)||void 0===e?void 0:e.server_result:null===(n=t.result)||void 0===n?void 0:n.client_result;return null!==(a=null===i||void 0===i?void 0:i.length)&&void 0!==a&&a?i[0].map((function(e){return{title:e.toLocaleUpperCase(),field:e.toLowerCase(),width:20*e.length}})):[]}(),rows:function(){var e,n,a=[],i="Server"===h?null===(e=t.result)||void 0===e?void 0:e.server_result:null===(n=t.result)||void 0===n?void 0:n.client_result;if(i){var c=i[0];i.slice(1).forEach((function(e,t){var n={id:t};e.forEach((function(e,t){n[c[t]]=e})),a.push(n)}))}return a}(),rowHeight:60})})})]})})}function je(){var e=i.a.useContext(ie),t=e.codeRunResults,n=e.setCodeRunResults,a=e.setIndex,c=(i.a.useContext(O).configs,i.a.useCallback((function(){return t.map((function(e,t){return Object(g.jsx)(G.a.TabPane,{tab:e.name,style:{height:"100%"},children:Object(g.jsx)(de,{codeRunResult:e,index:t})},t)}))}),[t]));return Object(g.jsx)(G.a,{type:"editable-card",style:{height:"100%"},addIcon:Object(g.jsx)(P.a,{}),onChange:function(e){a(parseInt(e))},onEdit:function(e,a){"add"===a?(t.push({name:"newResult",code:"",num_of_rows:100,annotation_name:"q3_annot"}),n(t)):(t.splice(parseInt(e),1),n(t))},children:c()})}var be=n(231),he=n(543),fe=n(904),me=n(905),pe=n(378),xe=n.n(pe),ge=n(535),Oe=n.n(ge);function ve(){var e,t=i.a.useContext(ie),n=null===(e=t.codeRunResults[t.index])||void 0===e?void 0:e.result;return Object(g.jsx)("div",{style:{height:500,width:1e3},children:n&&Object(g.jsx)(Oe.a,{data:n.joinGraph,orientation:"vertical",pathFunc:"step",translate:{y:100,x:400},nodeSize:{x:257,y:175}})})}function Ce(){var e,t=i.a.useContext(ie),n=t.setCodeRunResults,a=t.codeRunResults,c=t.runCode,r=t.isLoading,s=t.index,l=t.setShowEdit,u=t.showEdit,d=i.a.useContext(O).configs,b=E.a.useForm(),h=Object(o.a)(b,1)[0],f=i.a.useCallback((function(){var e=h.getFieldsValue();a[s].annotation_name=e.annotation_name,a[s].name=e.name,a[s].num_of_rows=parseInt(e.num_of_rows),n(a),l(!1)}),[a,s]);return i.a.useEffect((function(){h.setFieldsValue(a[s])}),[u]),Object(g.jsxs)(j.a,{justify:"end",style:{marginRight:20},children:[Object(g.jsx)(be.a,{title:"Run Code",children:Object(g.jsx)(k.a,{shape:"round",size:"large",style:{marginRight:10},loading:r,onClick:Object(W.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(s,d);case 2:case"end":return e.stop()}}),e)}))),children:Object(g.jsx)(fe.a,{})})}),Object(g.jsx)(be.a,{title:"Rename",children:Object(g.jsx)(k.a,{shape:"round",size:"large",style:{marginRight:10},onClick:function(){l(!0)},children:Object(g.jsx)(J.a,{})})}),(null===(e=a[s])||void 0===e?void 0:e.result)&&Object(g.jsx)(he.a,{content:Object(g.jsx)(ve,{}),placement:"leftBottom",trigger:"click",children:Object(g.jsx)(be.a,{title:"Join Tree",children:Object(g.jsx)(k.a,{shape:"round",size:"large",style:{marginRight:10},onClick:function(){},children:Object(g.jsx)(me.a,{})})})}),Object(g.jsx)(xe.a,{title:"Configuration",visible:u,onOk:f,onCancel:function(){h.resetFields(),l(!1)},children:Object(g.jsxs)(E.a,{initialValues:a[s],form:h,children:[Object(g.jsx)(E.a.Item,{name:"name",label:"Name",children:Object(g.jsx)(z.a,{placeholder:"Name"})}),Object(g.jsx)(E.a.Item,{name:"num_of_rows",label:"Number of rows",children:Object(g.jsx)(z.a,{placeholder:"Num of rows",type:"number"})}),Object(g.jsx)(E.a.Item,{name:"annotation_name",label:"Annotation Name",children:Object(g.jsx)(z.a,{placeholder:"Annotation Name"})})]})})]})}var ye=n(540);function ke(){var e=i.a.useContext(re),t=e.role,n=e.setRole,a=e.backend,c=e.setBackend,r=i.a.useContext(ie).deleteResultCache,o={role:t,backend:a};return Object(g.jsxs)("div",{style:{padding:10},children:[Object(g.jsx)(w.a.Title,{level:3,children:"Settings"}),Object(g.jsxs)(d.a,{children:[Object(g.jsx)(w.a.Title,{level:5,children:"General Settings"}),Object(g.jsxs)(E.a,{initialValues:o,onValuesChange:function(e){e.role&&n(e.role),e.backend&&c(e.backend)},children:[Object(g.jsx)(E.a.Item,{label:"Role",name:"role",children:Object(g.jsx)(D.a,{children:["Client","Server"].map((function(e,t){return Object(g.jsx)(D.a.Option,{value:e,children:e},"role-".concat(t))}))})}),Object(g.jsx)(E.a.Item,{label:"Backend",name:"backend",extra:"This will only affect the c++ code generator",children:Object(g.jsx)(D.a,{children:["Default Backend","Postgres Backend"].map((function(e,t){return Object(g.jsx)(D.a.Option,{value:e,children:e},"role-".concat(t))}))})})]})]}),Object(g.jsxs)(d.a,{title:"Delete Data",children:[Object(g.jsx)(w.a.Title,{level:5,children:"Stored results"}),Object(g.jsx)(k.a,{onClick:function(){r(),ye.b.success("Delete cache successfully")},children:"Delete"})]})]})}function we(){var e=i.a.useState(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],c=i.a.useContext(O),r=c.configs,s=c.setConfigs,l=i.a.useCallback((function(){r.push({table_name:"table",data_sizes:[],data_paths:[],columns:[],owner:"Server"}),s(r),a(!1),T.a.success({message:"Added a new table",placement:"bottomRight"})}),[r]);return Object(g.jsxs)("div",{children:[Object(g.jsx)(be.a,{title:"Create a new table",children:Object(g.jsx)(k.a,{shape:"round",style:{marginRight:20},onClick:function(){return a(!0)},children:Object(g.jsx)(P.a,{})})}),Object(g.jsx)(S.a,{visible:n,title:"Add New Table",onOk:l,onCancel:function(){a(!1)},children:Object(g.jsx)(w.a,{children:"Create a empty table?"})})]})}var Se=[{path:"/",title:"Table Config",component:Object(g.jsx)(U,{}),icon:Object(g.jsx)(m.a,{}),action:Object(g.jsx)(we,{}),hasSubMenu:!0},{path:"/settings",title:"Settings",component:Object(g.jsx)(ke,{}),icon:Object(g.jsx)(p.a,{}),hasSubMenu:!1},{path:"/editor",title:"Query Editor",component:Object(g.jsx)(je,{}),icon:Object(g.jsx)(x.a,{}),hasSubMenu:!1,action:Object(g.jsx)(Ce,{})}],_e=n(536),Re=n.n(_e);function Ie(e){var t=i.a.useContext(O).configs,n=Object(l.g)(),a=Object(l.f)(),c=i.a.useState(Se[0].title),r=Object(o.a)(c,2),s=r[0],u=r[1],d=(e.expanded,V.a.parse(n.search).table);i.a.useEffect((function(){if(n.pathname!==Se[0].path){var e=Se.find((function(e){return n.pathname.includes(e.path)&&e.path!==Se[0].path}));e&&u(null===e||void 0===e?void 0:e.title)}else u(Se[0].path)}),[n]);var j=i.a.useCallback((function(e){return e===Se[0].path?t.map((function(e,t){return Object(g.jsx)(f.a.Item,{onClick:function(){a.push("".concat(Se[0].path,"?table=").concat(e.table_name))},children:e.table_name},e.table_name)})):[]}),[t]),b=i.a.useCallback((function(){return Se.map((function(e){var t=j(e.path);return e.hasSubMenu?Object(g.jsx)(Re.a,{title:e.title,onTitleClick:function(){return a.push(e.path)},icon:e.icon,children:t},e.title):Object(g.jsx)(f.a.Item,{icon:e.icon,onClick:function(){return a.push(e.path)},children:e.title},e.title)}))}),[t]);return Object(g.jsx)(f.a,{theme:"light",mode:"inline",selectedKeys:null===d?[s]:[d],style:{height:"100%"},children:b()})}u.a.Header;var Ne=u.a.Sider,Te=u.a.Content;var Ee=function(){var e=i.a.useState(!1),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(g.jsx)("div",{style:{overflow:"hidden"},children:Object(g.jsx)(oe,{children:Object(g.jsx)(ce,{children:Object(g.jsx)(v,{children:Object(g.jsx)(s.a,{children:Object(g.jsxs)(u.a,{style:{height:"100vh",overflow:"hidden"},children:[Object(g.jsx)(d.a,{style:{margin:0,padding:0},bodyStyle:{padding:0},children:Object(g.jsxs)(j.a,{align:"middle",children:[Object(g.jsx)("div",{className:"trigger",onClick:function(){return a(!n)},children:n?Object(g.jsx)(b.a,{}):Object(g.jsx)(h.a,{})}),Object(g.jsx)("h1",{style:{padding:10},children:"CodeGen"}),Object(g.jsx)("div",{style:{flexGrow:1},children:" "}),Object(g.jsx)(l.c,{children:Se.map((function(e,t){return Object(g.jsx)(l.a,{path:e.path,exact:!0,children:e.action},"route-action-".concat(t))}))})]})}),Object(g.jsxs)(u.a,{style:{background:"white"},children:[Object(g.jsx)(Ne,{collapsible:!0,style:{background:"#fff"},trigger:null,collapsed:n,children:Object(g.jsx)(Ie,{expanded:!n})}),Object(g.jsx)(Te,{style:{margin:"0px 0px",padding:0,minHeight:280},children:Object(g.jsx)(l.c,{children:Se.map((function(e,t){return Object(g.jsx)(l.a,{path:e.path,exact:!0,children:e.component},"route-".concat(t))}))})})]})]})})})})})})},Le=function(e){e&&e instanceof Function&&n.e(75).then(n.bind(null,983)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(Ee,{})}),document.getElementById("root")),Le()}},[[842,3,4]]]);
//# sourceMappingURL=main.2ca84297.chunk.js.map