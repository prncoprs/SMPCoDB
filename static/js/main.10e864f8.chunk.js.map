{"version":3,"sources":["components/model/utils.tsx","components/model/CodeContext.tsx","components/pages/home/TreeDisplay.tsx","components/pages/home/CodeDisplay.tsx","components/pages/home/HomePage.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Utils","p","URL","process","href","CodeProvider","props","post","a","url","getURL","console","log","Axios","sql","state","code","table","tableStructure","resp","data","setState","result","setCode","window","localStorage","setItem","setTable","getItem","this","CodeContext","Provider","value","children","Component","context","React","createContext","TreeDisplay","useContext","style","height","width","joinGraph","orientation","pathFunc","translate","y","x","Title","Typography","Paragraph","Text","Link","CodeDisplay","useState","copied","setCopied","useEffect","overflow","position","top","right","gutter","onClick","navigator","clipboard","writeText","content","placement","defaultProps","language","theme","className","tokens","getLineProps","getTokenProps","map","line","i","key","token","TabPane","Tabs","HomePage","innerHeight","setHeight","isLoading","setIsLoading","addEventListener","maxHeight","padding","title","span","defaultActiveKey","onChange","tab","options","minimap","enabled","e","target","justifyContent","marginTop","type","loading","length","alert","notification","info","message","open","description","duration","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+OAAaA,EAAb,2FACE,SAAcC,GACZ,OAAO,IAAIC,IAAID,EAAGE,+DAA2BC,SAFjD,K,0BCsBaC,EAAb,kDACE,WAAYC,GAAmB,IAAD,8BAC5B,cAAMA,IAiBRC,KAlB8B,sBAkBvB,8BAAAC,EAAA,6DACDC,EAAMT,EAAMU,OAAO,YACvBC,QAAQC,IAAI,MAAOH,GAFd,SAGYI,IAAMN,KAAaE,EAAK,CACvCK,IAAK,EAAKC,MAAMC,KAChBC,MAAO,EAAKF,MAAMG,iBALf,OAGDC,EAHC,OAOLR,QAAQC,IAAIO,EAAKC,MACjB,EAAKC,SAAS,CAAEC,OAAQH,EAAKC,OARxB,2CAlBuB,EA6B9BG,QAAU,SAACP,GACT,EAAKK,SAAS,CAAEL,SAChBQ,OAAOC,aAAaC,QAAQ,OAAQV,IA/BR,EAkC9BW,SAAW,SAACT,GACV,EAAKG,SAAS,CAAEH,mBAChBM,OAAOC,aAAaC,QAAQ,iBAAkBR,IAlC9C,EAAKH,MAAQ,CACXQ,QAAS,EAAKA,QACdI,SAAU,EAAKA,SACfpB,KAAM,EAAKA,MALe,EADhC,qDAUE,WACE,IAAIS,EAAOQ,OAAOC,aAAaG,QAAQ,QACnCV,EAAiBM,OAAOC,aAAaG,QAAQ,kBACjDC,KAAKR,SAAS,CACZL,KAAI,OAAEA,QAAF,IAAEA,IAAQ,GACdE,eAAc,OAAEA,QAAF,IAAEA,IAAkB,OAfxC,oBAwCE,WACE,OACE,cAACY,EAAYC,SAAb,CAAsBC,MAAOH,KAAKd,MAAlC,SACGc,KAAKvB,MAAM2B,eA3CpB,GAAkCC,aAkD5BC,EAA4B,GAErBL,EAAcM,IAAMC,cAAcF,G,uKCtEhC,SAASG,IAAe,IAC7BhB,EAAWc,IAAMG,WAAWT,GAA5BR,OAER,OACE,qBAAKkB,MAAO,CAAEC,OAAQ,IAAKC,MAAO,KAAlC,SAEGpB,GACC,cAAC,IAAD,CACEF,KAAME,EAAOqB,UACbC,YAAY,WACZC,SAAS,OACTC,UAAW,CAAEC,EAAG,IAAKC,EAAG,S,ICR1BC,EAAiCC,IAAjCD,MAAiCC,IAA1BC,UAA0BD,IAAfE,KAAeF,IAATG,KACjB,SAASC,IAAe,IAC7BhC,EAAWc,IAAMG,WAAWT,GAA5BR,OAD4B,EAERc,IAAMmB,UAAS,GAFP,mBAE7BC,EAF6B,KAErBC,EAFqB,KAOpC,OAJArB,IAAMsB,WAAU,WACdD,GAAU,KACT,CAACnC,IAGF,eAAC,IAAD,CAAMkB,MAAO,CAAEE,MAAO,OAAQD,OAAQ,OAAQkB,SAAU,UAAxD,UACE,cAAC,IAAD,CAAOnB,MAAO,CAAEoB,SAAU,QAASC,IAAK,IAAKC,MAAO,IAApD,SACE,eAAC,IAAD,CAAKC,OAAQ,CAAC,GAAI,IAAlB,UACE,cAAC,IAAD,UACE,cAAC,IAAD,CACEC,QAAS,WAAO,IAAD,EACbC,UAAUC,UAAUC,UAApB,iBAA8B7C,QAA9B,IAA8BA,OAA9B,EAA8BA,EAAQN,YAAtC,QAA8C,IAC9CyC,GAAU,IAHd,SAMGD,EAAS,SAAW,WAGzB,cAAC,IAAD,UACE,cAAC,IAAD,CAASY,QAAS,cAAC9B,EAAD,IAAiB+B,UAAU,aAA7C,SACE,cAAC,IAAD,sCAKR,cAAC,IAAD,UACE,cAACpB,EAAD,uBAEF,cAAC,IAAD,2BACMqB,KADN,IAEEtD,KAAMM,EAAQN,KACduD,SAAS,MACTC,MAAOA,IAJT,SAMG,gBAAGC,EAAH,EAAGA,UAAWjC,EAAd,EAAcA,MAAOkC,EAArB,EAAqBA,OAAQC,EAA7B,EAA6BA,aAAcC,EAA3C,EAA2CA,cAA3C,OACC,qBAAKH,UAAWA,EAAWjC,MAAOA,EAAlC,SACGkC,EAAOG,KAAI,SAACC,EAAMC,GAAP,OACV,+CAASJ,EAAa,CAAEG,OAAME,IAAKD,KAAnC,aACGD,EAAKD,KAAI,SAACI,EAAOD,GAAR,OACR,oCAAUJ,EAAc,CAAEK,QAAOD,4B,ICjC3CE,EAAYC,IAAZD,QACA7B,EAASH,IAATG,KAEO,SAAS+B,IAAY,IAAD,EACLhD,IAAMmB,SAAS/B,OAAO6D,aADjB,mBAC1B5C,EAD0B,KAClB6C,EADkB,OAEClD,IAAMmB,UAAS,GAFhB,mBAE1BgC,EAF0B,KAEfC,EAFe,KAIjCpD,IAAMsB,WAAU,WACdlC,OAAOiE,iBAAiB,UAAU,WAChCH,EAAU9D,OAAO6D,kBAElB,IAR8B,MAiB7BjD,IAAMG,WAAWT,GANnBP,EAX+B,EAW/BA,QACAI,EAZ+B,EAY/BA,SACAX,EAb+B,EAa/BA,KACAE,EAd+B,EAc/BA,eACAI,EAf+B,EAe/BA,OACAf,EAhB+B,EAgB/BA,KAGF,OACE,eAAC,IAAD,CAAQiC,MAAO,CAAEkD,UAAW,QAAS/B,SAAU,SAAUgC,QAAS,IAAlE,UACE,cAAC,IAAD,CAAYC,MAAM,YAClB,cAAC,UAAD,UACE,eAAC,IAAD,CAAKpD,MAAO,CAAEC,OAAQ,OAASsB,OAAQ,CAAC,GAAI,IAA5C,UACE,cAAC,IAAD,CAAK8B,KAAM,EAAX,SACE,eAAC,IAAD,WACE,eAAC,IAAD,CAAMC,iBAAiB,IAAIC,SAAU,aAArC,UACE,cAACb,EAAD,CAASc,IAAI,gBAAb,SACE,cAAC,IAAD,CACEvD,OAAQA,EAAS,IACjB8B,SAAS,MACTvC,MAAOhB,EACPiF,QAAS,CAAEC,QAAS,CAAEC,SAAS,IAC/BJ,SAAU,SAACK,GACLA,GACF7E,EAAQ6E,OARiB,KAajC,eAAClB,EAAD,CAASc,IAAI,kBAAb,UACE,cAAC,IAAD,UACE,cAAC,EAAD,CACEK,OAAO,SACPjG,KAAK,gFAFP,uCAOF,cAAC,IAAD,CACEqC,OAAQA,EAAS,IACjBT,MAAOd,EACPqD,SAAS,OACT0B,QAAS,CAAEC,QAAS,CAAEC,SAAS,IAC/BJ,SAAU,SAACK,GACLA,GACFzE,EAASyE,QAhBkB,QAsBrC,cAAC,IAAD,CAAK5D,MAAO,CAAE8D,eAAgB,WAAYC,UAAW,IAArD,SACE,cAAC,IAAD,CACEC,KAAK,UACLC,QAASlB,EACTvB,QAAO,sBAAE,sBAAAxD,EAAA,yDACPgF,GAAa,GACQ,KAAb,OAAJxE,QAAI,IAAJA,OAAA,EAAAA,EAAM0F,SAA2C,KAAb,OAAdxF,QAAc,IAAdA,OAAA,EAAAA,EAAgBwF,QAFnC,uBAGLlF,OAAOmF,MAAM,iBACbnB,GAAa,GAJR,mDAQCjF,IARD,OASLqG,IAAaC,KAAK,CAChBC,QAAS,mBAVN,kDAaLF,IAAaG,KAAK,CAChBD,QAAS,uBACTE,YAAY,GAAD,aACXC,SAAU,IAhBP,yBAmBLzB,GAAa,GAnBR,6EAHX,4BA+BN,cAAC,IAAD,CAAKK,KAAM,GAAX,SAAgBvE,GAAU,cAACgC,EAAD,cCrGrB4D,MARf,WACE,OACE,cAAC,EAAD,UACE,cAAC9B,EAAD,OCMS+B,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.10e864f8.chunk.js","sourcesContent":["export class Utils {\n  static getURL(p: string): string {\n    return new URL(p, process.env.REACT_APP_URL).href;\n  }\n}\n","/** @format */\n\nimport React, { Component } from \"react\";\nimport { Utils } from \"./utils\";\nimport Axios from \"axios\";\n\ninterface Result {\n  code: string;\n  joinGraph: any;\n}\n\ninterface CodeContextState {\n  code?: string;\n  tableStructure?: string;\n  result?: Result;\n  post(): Promise<void>;\n  setCode(code: string): void;\n  setTable(table: string): void;\n}\n\ninterface CodeProps {}\n\nexport class CodeProvider extends Component<CodeProps, CodeContextState> {\n  constructor(props: CodeProps) {\n    super(props);\n    this.state = {\n      setCode: this.setCode,\n      setTable: this.setTable,\n      post: this.post,\n    };\n  }\n\n  componentDidMount() {\n    let code = window.localStorage.getItem(\"code\");\n    let tableStructure = window.localStorage.getItem(\"tableStructure\");\n    this.setState({\n      code: code ?? \"\",\n      tableStructure: tableStructure ?? \"\",\n    });\n  }\n\n  post = async (): Promise<void> => {\n    let url = Utils.getURL(\"generate\");\n    console.log(\"url\", url);\n    let resp = await Axios.post<Result>(url, {\n      sql: this.state.code,\n      table: this.state.tableStructure,\n    });\n    console.log(resp.data);\n    this.setState({ result: resp.data });\n  };\n\n  setCode = (code: string) => {\n    this.setState({ code });\n    window.localStorage.setItem(\"code\", code);\n  };\n\n  setTable = (tableStructure: string) => {\n    this.setState({ tableStructure });\n    window.localStorage.setItem(\"tableStructure\", tableStructure);\n  };\n\n  render() {\n    return (\n      <CodeContext.Provider value={this.state}>\n        {this.props.children}\n      </CodeContext.Provider>\n    );\n  }\n}\n\n//@ts-ignore\nconst context: CodeContextState = {};\n\nexport const CodeContext = React.createContext(context);\n","import React from \"react\";\nimport { CodeContext } from \"../../model/CodeContext\";\nimport Tree from \"react-d3-tree\";\n\nexport default function TreeDisplay() {\n  const { result } = React.useContext(CodeContext);\n\n  return (\n    <div style={{ height: 300, width: 300 }}>\n      {/* {JSON.stringify(result?.joinGraph)} */}\n      {result && (\n        <Tree\n          data={result.joinGraph}\n          orientation=\"vertical\"\n          pathFunc=\"step\"\n          translate={{ y: 100, x: 100 }}\n        />\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport Highlight, { defaultProps } from \"prism-react-renderer\";\nimport { CodeContext } from \"../../model/CodeContext\";\nimport { Affix, Button, Card, Col, Popover, Row, Typography } from \"antd\";\nimport theme from \"prism-react-renderer/themes/github\";\nimport TreeDisplay from \"./TreeDisplay\";\n\nconst { Title, Paragraph, Text, Link } = Typography;\nexport default function CodeDisplay() {\n  const { result } = React.useContext(CodeContext);\n  const [copied, setCopied] = React.useState(false);\n  React.useEffect(() => {\n    setCopied(false);\n  }, [result]);\n\n  return (\n    <Card style={{ width: \"100%\", height: \"90vh\", overflow: \"scroll\" }}>\n      <Affix style={{ position: \"fixed\", top: 110, right: 40 }}>\n        <Row gutter={[10, 10]}>\n          <Col>\n            <Button\n              onClick={() => {\n                navigator.clipboard.writeText(result?.code ?? \"\");\n                setCopied(true);\n              }}\n            >\n              {copied ? \"Copied\" : \"Copy\"}\n            </Button>\n          </Col>\n          <Col>\n            <Popover content={<TreeDisplay />} placement=\"leftBottom\">\n              <Button>Show Join Tree</Button>\n            </Popover>\n          </Col>\n        </Row>\n      </Affix>\n      <Typography>\n        <Title>Result</Title>\n      </Typography>\n      <Highlight\n        {...defaultProps}\n        code={result!.code}\n        language=\"cpp\"\n        theme={theme}\n      >\n        {({ className, style, tokens, getLineProps, getTokenProps }) => (\n          <pre className={className} style={style}>\n            {tokens.map((line, i) => (\n              <div {...getLineProps({ line, key: i })}>\n                {line.map((token, key) => (\n                  <span {...getTokenProps({ token, key })} />\n                ))}\n              </div>\n            ))}\n          </pre>\n        )}\n      </Highlight>\n    </Card>\n  );\n}\n","import {\n  Button,\n  Card,\n  Col,\n  notification,\n  PageHeader,\n  Row,\n  Tabs,\n  Typography,\n} from \"antd\";\nimport Layout, { Content } from \"antd/lib/layout/layout\";\nimport Editor from \"@monaco-editor/react\";\nimport Sider from \"antd/lib/layout/Sider\";\nimport React from \"react\";\nimport { CodeContext } from \"../../model/CodeContext\";\nimport CodeDisplay from \"./CodeDisplay\";\n\nconst { TabPane } = Tabs;\nconst { Link } = Typography;\n\nexport default function HomePage() {\n  const [height, setHeight] = React.useState(window.innerHeight);\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", () => {\n      setHeight(window.innerHeight);\n    });\n  }, []);\n\n  const {\n    setCode,\n    setTable,\n    code,\n    tableStructure,\n    result,\n    post,\n  } = React.useContext(CodeContext);\n\n  return (\n    <Layout style={{ maxHeight: \"100vh\", overflow: \"hidden\", padding: 10 }}>\n      <PageHeader title=\"CodeGen\" />\n      <Content>\n        <Row style={{ height: \"80%\" }} gutter={[16, 10]}>\n          <Col span={8}>\n            <Card>\n              <Tabs defaultActiveKey=\"1\" onChange={() => {}}>\n                <TabPane tab=\"SQL Statement\" key=\"1\">\n                  <Editor\n                    height={height - 300}\n                    language=\"sql\"\n                    value={code}\n                    options={{ minimap: { enabled: false } }}\n                    onChange={(e) => {\n                      if (e) {\n                        setCode(e);\n                      }\n                    }}\n                  />\n                </TabPane>\n                <TabPane tab=\"Table structure\" key=\"2\">\n                  <Typography>\n                    <Link\n                      target=\"_blank\"\n                      href=\"https://github.com/sirily11/SECYAN-GEN/blob/master/examples/table_config.json\"\n                    >\n                      Example Table Structure\n                    </Link>\n                  </Typography>\n                  <Editor\n                    height={height - 300}\n                    value={tableStructure}\n                    language=\"json\"\n                    options={{ minimap: { enabled: false } }}\n                    onChange={(e) => {\n                      if (e) {\n                        setTable(e);\n                      }\n                    }}\n                  />\n                </TabPane>\n              </Tabs>\n              <Row style={{ justifyContent: \"flex-end\", marginTop: 10 }}>\n                <Button\n                  type=\"primary\"\n                  loading={isLoading}\n                  onClick={async () => {\n                    setIsLoading(true);\n                    if (code?.length === 0 || tableStructure?.length === 0) {\n                      window.alert(\"Invaild Input\");\n                      setIsLoading(false);\n                      return;\n                    }\n                    try {\n                      await post();\n                      notification.info({\n                        message: \"Code generated\",\n                      });\n                    } catch (err) {\n                      notification.open({\n                        message: \"Cannot generate code\",\n                        description: `${err}`,\n                        duration: 5,\n                      });\n                    } finally {\n                      setIsLoading(false);\n                    }\n                  }}\n                >\n                  Convert\n                </Button>\n              </Row>\n            </Card>\n          </Col>\n          <Col span={16}>{result && <CodeDisplay />}</Col>\n        </Row>\n      </Content>\n    </Layout>\n  );\n}\n","import React from 'react';\nimport 'antd/dist/antd.css'; // or 'antd/dist/antd.less'\nimport { CodeProvider } from './components/model/CodeContext';\nimport HomePage from './components/pages/home/HomePage';\n\nfunction App() {\n  return (\n    <CodeProvider>\n      <HomePage />\n    </CodeProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}