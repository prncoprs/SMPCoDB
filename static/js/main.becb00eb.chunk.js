(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{263:function(e,t,a){},469:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(25),s=a.n(r),o=(a(263),a(264),a(57)),i=a.n(o),l=a(99),u=a(129),d=a(130),b=a(252),j=a(250),h=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,null,[{key:"getURL",value:function(e){return new URL(e,"https://cwvf54ckb6.execute-api.ap-east-1.amazonaws.com/dev/").href}}]),e}(),g=a(155),p=a.n(g),x=a(6),v=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(e){var n,c,r;Object(u.a)(this,a),(r=t.call(this,e)).setFunctionName=function(e){r.setState({functionName:e})},r.setDatabase=function(e){r.setState({databaseName:e})},r.setBackend=function(e){r.setState({backend:e}),localStorage.setItem("backend",e)},r.post=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({result:void 0}),t=h.getURL("generate"),e.next=4,p.a.post(t,{sql:r.state.code,table:r.state.tableStructure,functionName:r.state.functionName});case 4:a=e.sent,r.setState({result:a.data});case 6:case"end":return e.stop()}}),e)}))),r.postDB=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setState({result:void 0}),t=h.getURL("generate_db"),"true"!==localStorage.getItem("createDB")){e.next=5;break}return e.next=5,r.createDB();case 5:return e.next=7,p.a.post(t,{sql:r.state.code,table:r.state.tableStructure,database:r.state.databaseName,functionName:r.state.functionName});case 7:a=e.sent,r.setState({result:a.data});case 9:case"end":return e.stop()}}),e)}))),r.createDB=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("createScript"),a=h.getURL("create_db"),e.next=4,p.a.post(a,{data:t});case 4:case"end":return e.stop()}}),e)}))),r.setCode=function(e){r.setState({code:e}),window.localStorage.setItem("code",e)},r.setTable=function(e){r.setState({tableStructure:e}),window.localStorage.setItem("tableStructure",e)};var s=null!==(n=localStorage.getItem("backend"))&&void 0!==n?n:"python",o="true"===localStorage.getItem("createDB")&&null!==(c=localStorage.getItem("dbName"))&&void 0!==c?c:void 0;return r.state={setCode:r.setCode,setBackend:r.setBackend,backend:s,setTable:r.setTable,post:r.post,setDatabase:r.setDatabase,postDB:r.postDB,setFunctionName:r.setFunctionName,databaseName:o},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=window.localStorage.getItem("code"),t=window.localStorage.getItem("tableStructure");this.setState({code:null!==e&&void 0!==e?e:"",tableStructure:null!==t&&void 0!==t?t:""})}},{key:"render",value:function(){return Object(x.jsx)(f.Provider,{value:this.state,children:this.props.children})}}]),a}(n.Component),O={},f=c.a.createContext(O),m=a(33),S=a(177),k=a(476),w=a(103),C=a(50),y=a(479),N=a(478),I=a(102),B=a(253),D=a(176),T=a.n(D),F=a(112),L=a(42),P=a(178),E=a(480),U=a(254),R=a(481),q=a(245),_=a(240),z=a.n(_);function G(){var e=c.a.useContext(f).result;return Object(x.jsx)("div",{style:{height:500,width:1e3},children:e&&Object(x.jsx)(z.a,{data:e.joinGraph,orientation:"vertical",pathFunc:"step",translate:{y:100,x:400},nodeSize:{x:257,y:175}})})}var J=a(244),A=a.n(J),H=a(243),M=a.n(H);function Q(){var e=c.a.useContext(f).result;return Object(x.jsxs)(k.a,{children:[Object(x.jsx)(M.a,{level:5,children:"Table with errors"}),Object(x.jsx)("ul",{children:null===e||void 0===e?void 0:e.errorTables.map((function(e){return Object(x.jsx)("li",{children:Object(x.jsx)(A.a,{children:e})},e)}))})]})}var K=k.a.Title;k.a.Paragraph,k.a.Text,k.a.Link;function Y(){var e=c.a.useContext(f).result,t=c.a.useState(!1),a=Object(m.a)(t,2),n=a[0],r=a[1],s=c.a.useState(!1),o=Object(m.a)(s,2);o[0],o[1];return c.a.useEffect((function(){r(!1)}),[e]),Object(x.jsxs)(y.a,{style:{width:"100%",height:"90vh",overflow:"scroll"},children:[Object(x.jsx)(E.a,{style:{position:"fixed",top:110,right:40},children:Object(x.jsxs)(w.a,{gutter:[10,10],children:[Object(x.jsx)(C.a,{children:Object(x.jsx)(I.a,{onClick:function(){var t;navigator.clipboard.writeText(null!==(t=null===e||void 0===e?void 0:e.code)&&void 0!==t?t:""),r(!0)},children:n?"Copied":"Copy"})}),Object(x.jsx)(C.a,{children:Object(x.jsx)(U.a,{content:Object(x.jsx)(G,{}),placement:"leftBottom",trigger:"click",children:Object(x.jsx)(I.a,{children:"Show Join Tree"})})})]})}),Object(x.jsx)(k.a,{children:Object(x.jsx)(K,{children:"Result"})}),!1===(null===e||void 0===e?void 0:e.isFreeConnex)&&Object(x.jsx)(U.a,{content:Object(x.jsx)(Q,{}),children:Object(x.jsx)(R.a,{type:"error",style:{marginBottom:10},message:"Cannot auto generate a free connex join tree from query. Check the join tree and reorder your join statement."})}),Object(x.jsx)(P.a,Object(L.a)(Object(L.a)({},P.b),{},{code:e.code,language:"cpp",theme:q.a,children:function(e){var t=e.className,a=e.style,n=e.tokens,c=e.getLineProps,r=e.getTokenProps;return Object(x.jsx)("pre",{className:t,style:a,children:n.map((function(e,t){return Object(x.jsx)("div",Object(L.a)(Object(L.a)({},c({line:e,key:t})),{},{children:e.map((function(e,t){return Object(x.jsx)("span",Object(L.a)({},r({token:e,key:t})))}))}))}))})}}))]})}var V=a(477),W=a(475),X=a(474),Z=a(170),$=a.n(Z),ee=a(128),te=a.n(ee),ae=V.a.Option;function ne(){var e=c.a.useState(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],r=c.a.useState(""),s=Object(m.a)(r,2),o=s[0],i=s[1],l=c.a.useState(!1),u=Object(m.a)(l,2),d=u[0],b=u[1],j=c.a.useState(""),h=Object(m.a)(j,2),g=h[0],p=h[1],v=W.a.useForm(),O=(Object(m.a)(v,1)[0],c.a.useContext(f)),S=O.setBackend,k=O.backend,w=O.setDatabase,C=Object(x.jsxs)(V.a,{value:k,style:{width:200},onChange:function(e){return S(e)},children:[Object(x.jsx)(ae,{value:"python",children:"Use Default Backend"}),Object(x.jsx)(ae,{value:"db",children:"Use Query Plan"})]}),y="python"==k?[C]:[C,Object(x.jsx)(I.a,{type:"primary",onClick:function(){var e,t;i(null!==(e=localStorage.getItem("createScript"))&&void 0!==e?e:""),b("true"===localStorage.getItem("createDB")),p(null!==(t=localStorage.getItem("dbName"))&&void 0!==t?t:""),n(!0)},children:"Settings"})];return Object(x.jsxs)("div",{children:[Object(x.jsx)(X.a,{title:"CodeGen",extra:y}),Object(x.jsxs)(te.a,{visible:a,title:"Database settings",onCancel:function(){return n(!1)},onOk:function(){localStorage.setItem("createScript",o),localStorage.setItem("createDB",!0===d?"true":"false"),localStorage.setItem("dbName",g),w(d?void 0:g),n(!1)},children:[d&&Object(x.jsx)("div",{style:{height:500},children:Object(x.jsx)(F.a,{value:o,options:{minimap:{enabled:!1}},onChange:function(e){return i(null!==e&&void 0!==e?e:"")},language:"sql"})}),Object(x.jsx)($.a,{value:d,onChange:function(e){b(e.target.checked)},children:"Create database"}),d,!d&&Object(x.jsx)(N.a,{placeholder:"Database Name",value:g,onChange:function(e){return p(e.target.value)}})]})]})}var ce=S.a.TabPane,re=k.a.Link;function se(){var e=c.a.useState(window.innerHeight),t=Object(m.a)(e,2),a=t[0],n=t[1],r=c.a.useState(!1),s=Object(m.a)(r,2),o=s[0],u=s[1];c.a.useEffect((function(){window.addEventListener("resize",(function(){n(window.innerHeight)}))}),[]);var d=c.a.useContext(f),b=d.setCode,j=d.setTable,h=d.code,g=d.tableStructure,p=d.result,v=d.post,O=d.postDB,L=d.backend,P=d.functionName,E=d.setFunctionName;return Object(x.jsxs)(T.a,{style:{height:"100vh",overflow:"hidden",padding:10},children:[Object(x.jsx)(ne,{}),Object(x.jsx)(D.Content,{style:{height:"100%"},children:Object(x.jsxs)(w.a,{style:{height:"80%"},gutter:[16,10],children:[Object(x.jsx)(C.a,{span:8,children:Object(x.jsxs)(y.a,{children:[Object(x.jsxs)(S.a,{defaultActiveKey:"0",onChange:function(){},children:[Object(x.jsx)(ce,{tab:"Function Info",children:Object(x.jsx)(N.a,{value:P,placeholder:"Function Name",onChange:function(e){E(e.target.value)}})},"0"),Object(x.jsx)(ce,{tab:"SQL Statement",children:Object(x.jsx)(F.a,{height:a-300,language:"sql",value:h,options:{minimap:{enabled:!1}},onChange:function(e){e&&b(e)}})},"1"),Object(x.jsxs)(ce,{tab:"Table structure",children:[Object(x.jsx)(k.a,{children:Object(x.jsx)(re,{target:"_blank",href:"https://github.com/sirily11/SECYAN-GEN/blob/master/examples/table_config.json",children:"Example Table Structure"})}),Object(x.jsx)(F.a,{height:a-300,value:g,language:"json",options:{minimap:{enabled:!1}},onChange:function(e){e&&j(e)}})]},"2")]}),Object(x.jsx)(w.a,{style:{justifyContent:"flex-end",marginTop:10},children:Object(x.jsx)(I.a,{type:"primary",loading:o,onClick:Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),0!==(null===h||void 0===h?void 0:h.length)&&0!==(null===g||void 0===g?void 0:g.length)){e.next=5;break}return window.alert("Invaild Input"),u(!1),e.abrupt("return");case 5:if(e.prev=5,"python"!=L){e.next=11;break}return e.next=9,v();case 9:e.next=13;break;case 11:return e.next=13,O();case 13:B.a.info({message:"Code generated"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),B.a.error({message:"Cannot generate code",description:"".concat(null===e.t0||void 0===e.t0||null===(t=e.t0.response)||void 0===t?void 0:t.data),duration:5});case 19:return e.prev=19,u(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,16,19,22]])}))),children:"Convert"})})]})}),Object(x.jsx)(C.a,{span:16,children:p&&Object(x.jsx)(Y,{})})]})})]})}var oe=function(){return Object(x.jsx)(v,{children:Object(x.jsx)(se,{})})},ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,482)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(oe,{})}),document.getElementById("root")),ie()}},[[469,1,2]]]);
//# sourceMappingURL=main.becb00eb.chunk.js.map