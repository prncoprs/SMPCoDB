{"version":3,"sources":["components/model/utils.tsx","components/model/CodeContext.tsx","components/pages/home/component/TreeDisplay.tsx","components/pages/home/component/ErrorTablesDisplay.tsx","components/pages/home/component/CodeDisplay.tsx","components/pages/home/component/Header.tsx","components/pages/home/HomePage.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Utils","p","URL","process","href","CodeProvider","props","setDatabase","name","setState","databaseName","setBackend","end","backend","localStorage","setItem","post","a","result","undefined","url","getURL","Axios","sql","state","code","table","tableStructure","resp","data","postDB","getItem","createDB","database","setCode","window","setTable","this","CodeContext","Provider","value","children","Component","context","React","createContext","TreeDisplay","useContext","style","height","width","joinGraph","orientation","pathFunc","translate","y","x","nodeSize","ErrorTablesDisplay","level","errorTables","map","e","Title","Typography","Paragraph","Text","Link","CodeDisplay","useState","copied","setCopied","useEffect","overflow","position","top","right","gutter","onClick","navigator","clipboard","writeText","content","placement","trigger","isFreeConnex","type","marginBottom","message","defaultProps","language","theme","className","tokens","getLineProps","getTokenProps","line","i","key","token","Option","Select","Header","show","setShow","setCreateDB","dbName","setDBName","Form","useForm","select","onChange","v","extra","title","visible","onCancel","onOk","options","minimap","enabled","target","checked","placeholder","TabPane","Tabs","HomePage","innerHeight","setHeight","isLoading","setIsLoading","addEventListener","maxHeight","padding","span","defaultActiveKey","tab","justifyContent","marginTop","loading","length","alert","notification","info","error","description","response","duration","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.02fe5e3d.chunk.js","sourcesContent":["export class Utils {\n  static getURL(p: string): string {\n    return new URL(p, process.env.REACT_APP_URL).href;\n  }\n}\n","/** @format */\n\nimport React, { Component } from \"react\";\nimport { Utils } from \"./utils\";\nimport Axios from \"axios\";\n\ninterface Result {\n  code: string;\n  joinGraph: any;\n  isFreeConnex: boolean;\n  errorTables: string[];\n}\n\ninterface CodeContextState {\n  code?: string;\n  tableStructure?: string;\n  result?: Result;\n  backend: string;\n  databaseName?: string;\n  setBackend(backend: string): void;\n  post(): Promise<void>;\n  postDB(): Promise<void>;\n  setCode(code: string): void;\n  setDatabase(name?: string): void;\n  setTable(table: string): void;\n}\n\ninterface CodeProps {}\n\nexport class CodeProvider extends Component<CodeProps, CodeContextState> {\n  constructor(props: CodeProps) {\n    super(props);\n    let backend = localStorage.getItem(\"backend\") ?? \"python\";\n    this.state = {\n      setCode: this.setCode,\n      setBackend: this.setBackend,\n      backend: backend,\n      setTable: this.setTable,\n      post: this.post,\n      setDatabase: this.setDatabase,\n      postDB: this.postDB,\n    };\n  }\n\n  componentDidMount() {\n    let code = window.localStorage.getItem(\"code\");\n    let tableStructure = window.localStorage.getItem(\"tableStructure\");\n    this.setState({\n      code: code ?? \"\",\n      tableStructure: tableStructure ?? \"\",\n    });\n  }\n\n  setDatabase = (name?: string) => {\n    this.setState({ databaseName: name });\n  };\n\n  setBackend = (end: string) => {\n    this.setState({ backend: end });\n    localStorage.setItem(\"backend\", end);\n  };\n\n  /**\n   * Post request and update generated code\n   */\n  post = async (): Promise<void> => {\n    this.setState({ result: undefined });\n    let url = Utils.getURL(\"generate\");\n    let resp = await Axios.post<Result>(url, {\n      sql: this.state.code,\n      table: this.state.tableStructure,\n    });\n    this.setState({ result: resp.data });\n  };\n\n  /**\n   * Post request using db execution plan\n   */\n  postDB = async (): Promise<void> => {\n    this.setState({ result: undefined });\n    let url = Utils.getURL(\"generate_db\");\n    if (localStorage.getItem(\"createDB\") === \"true\") {\n      await this.createDB();\n    }\n    let resp = await Axios.post<Result>(url, {\n      sql: this.state.code,\n      table: this.state.tableStructure,\n      database: this.state.databaseName,\n    });\n    this.setState({ result: resp.data });\n  };\n\n  createDB = async (): Promise<void> => {\n    let code = localStorage.getItem(\"createScript\");\n    let url = Utils.getURL(\"create_db\");\n    await Axios.post(url, { data: code });\n  };\n\n  setCode = (code: string) => {\n    this.setState({ code });\n    window.localStorage.setItem(\"code\", code);\n  };\n\n  setTable = (tableStructure: string) => {\n    this.setState({ tableStructure });\n    window.localStorage.setItem(\"tableStructure\", tableStructure);\n  };\n\n  render() {\n    return (\n      <CodeContext.Provider value={this.state}>\n        {this.props.children}\n      </CodeContext.Provider>\n    );\n  }\n}\n\n//@ts-ignore\nconst context: CodeContextState = {};\n\nexport const CodeContext = React.createContext(context);\n","import React from \"react\";\nimport { CodeContext } from \"../../../model/CodeContext\";\nimport Tree from \"react-d3-tree\";\n\nexport default function TreeDisplay() {\n  const { result } = React.useContext(CodeContext);\n\n  return (\n    <div style={{ height: 500, width: 1000 }}>\n      {/* {JSON.stringify(result?.joinGraph)} */}\n      {result && (\n        <Tree\n          data={result.joinGraph}\n          orientation=\"vertical\"\n          pathFunc=\"step\"\n          translate={{ y: 100, x: 400 }}\n          nodeSize={{ x: 257, y: 175 }}\n        />\n      )}\n    </div>\n  );\n}\n","import { Typography } from \"antd\";\nimport Paragraph from \"antd/lib/typography/Paragraph\";\nimport Title from \"antd/lib/typography/Title\";\nimport React from \"react\";\nimport { CodeContext } from \"../../../model/CodeContext\";\n\nexport default function ErrorTablesDisplay() {\n  const { result } = React.useContext(CodeContext);\n\n  return (\n    <Typography>\n      <Title level={5}>Table with errors</Title>\n      <ul>\n        {result?.errorTables.map((e) => (\n          <li key={e}>\n            <Paragraph>{e}</Paragraph>\n          </li>\n        ))}\n      </ul>\n    </Typography>\n  );\n}\n","import React from \"react\";\nimport Highlight, { defaultProps } from \"prism-react-renderer\";\nimport { CodeContext } from \"../../../model/CodeContext\";\nimport {\n  Affix,\n  Alert,\n  Button,\n  Card,\n  Col,\n  Popover,\n  Row,\n  Typography,\n} from \"antd\";\nimport theme from \"prism-react-renderer/themes/github\";\nimport TreeDisplay from \"./TreeDisplay\";\nimport ErrorTablesDisplay from \"./ErrorTablesDisplay\";\n\nconst { Title, Paragraph, Text, Link } = Typography;\nexport default function CodeDisplay() {\n  const { result } = React.useContext(CodeContext);\n  const [copied, setCopied] = React.useState(false);\n  const [visible, setVisible] = React.useState(false);\n\n  React.useEffect(() => {\n    setCopied(false);\n  }, [result]);\n\n  return (\n    <Card style={{ width: \"100%\", height: \"90vh\", overflow: \"scroll\" }}>\n      <Affix style={{ position: \"fixed\", top: 110, right: 40 }}>\n        <Row gutter={[10, 10]}>\n          <Col>\n            <Button\n              onClick={() => {\n                navigator.clipboard.writeText(result?.code ?? \"\");\n                setCopied(true);\n              }}\n            >\n              {copied ? \"Copied\" : \"Copy\"}\n            </Button>\n          </Col>\n          <Col>\n            <Popover\n              content={<TreeDisplay />}\n              placement=\"leftBottom\"\n              trigger=\"click\"\n            >\n              <Button>Show Join Tree</Button>\n            </Popover>\n          </Col>\n        </Row>\n      </Affix>\n      <Typography>\n        <Title>Result</Title>\n      </Typography>\n      {result?.isFreeConnex === false && (\n        <Popover content={<ErrorTablesDisplay />}>\n          <Alert\n            type=\"error\"\n            style={{ marginBottom: 10 }}\n            message={`Cannot auto generate a free connex join tree from query. Check the join tree and reorder your join statement.`}\n          />\n        </Popover>\n      )}\n      <Highlight\n        {...defaultProps}\n        code={result!.code}\n        language=\"cpp\"\n        theme={theme}\n      >\n        {({ className, style, tokens, getLineProps, getTokenProps }) => (\n          <pre className={className} style={style}>\n            {tokens.map((line, i) => (\n              <div {...getLineProps({ line, key: i })}>\n                {line.map((token, key) => (\n                  <span {...getTokenProps({ token, key })} />\n                ))}\n              </div>\n            ))}\n          </pre>\n        )}\n      </Highlight>\n    </Card>\n  );\n}\n","import Editor from \"@monaco-editor/react\";\nimport { Button, PageHeader, Select, Form, Input } from \"antd\";\nimport Checkbox from \"antd/lib/checkbox/Checkbox\";\nimport Modal from \"antd/lib/modal/Modal\";\nimport React from \"react\";\nimport { CodeContext } from \"../../../model/CodeContext\";\n\nconst { Option } = Select;\n\nexport default function Header() {\n  const [show, setShow] = React.useState(false);\n  const [code, setCode] = React.useState(\"\");\n  const [createDB, setCreateDB] = React.useState(false);\n  const [dbName, setDBName] = React.useState(\"\");\n  const [form] = Form.useForm();\n  const { setBackend, backend, setDatabase } = React.useContext(CodeContext);\n\n  const onSettingsClick = () => {\n    setCode(localStorage.getItem(\"createScript\") ?? \"\");\n    setCreateDB(localStorage.getItem(\"createDB\") === \"true\" ? true : false);\n    setDBName(localStorage.getItem(\"dbName\") ?? \"\");\n    setShow(true);\n  };\n\n  const onSubmit = () => {\n    localStorage.setItem(\"createScript\", code);\n    localStorage.setItem(\"createDB\", createDB === true ? \"true\" : \"false\");\n    localStorage.setItem(\"dbName\", dbName);\n    if (!createDB) {\n      setDatabase(dbName);\n    } else {\n      setDatabase(undefined);\n    }\n    setShow(false);\n  };\n\n  const select = (\n    <Select\n      value={backend}\n      style={{ width: 200 }}\n      onChange={(v) => setBackend(v)}\n    >\n      <Option value={\"python\"}>Use Default Backend</Option>\n      <Option value={\"db\"}>Use Query Plan</Option>\n    </Select>\n  );\n  const extra =\n    backend == \"python\"\n      ? [select]\n      : [\n          select,\n          <Button type=\"primary\" onClick={onSettingsClick}>\n            Settings\n          </Button>,\n        ];\n\n  return (\n    <div>\n      <PageHeader title=\"CodeGen\" extra={extra} />\n\n      <Modal\n        visible={show}\n        title=\"Database settings\"\n        onCancel={() => setShow(false)}\n        onOk={() => {\n          onSubmit();\n        }}\n      >\n        {createDB && (\n          <div style={{ height: 500 }}>\n            <Editor\n              value={code}\n              options={{ minimap: { enabled: false } }}\n              onChange={(v) => setCode(v ?? \"\")}\n              language=\"sql\"\n            />\n          </div>\n        )}\n        <Checkbox\n          value={createDB}\n          onChange={(v) => {\n            setCreateDB(v.target.checked);\n          }}\n        >\n          Create database\n        </Checkbox>\n        {createDB}\n        {!createDB && (\n          <Input\n            placeholder=\"Database Name\"\n            value={dbName}\n            onChange={(e) => setDBName(e.target.value)}\n          />\n        )}\n      </Modal>\n    </div>\n  );\n}\n","import {\n  Button,\n  Card,\n  Col,\n  notification,\n  PageHeader,\n  Row,\n  Select,\n  Tabs,\n  Typography,\n} from \"antd\";\nimport Layout, { Content } from \"antd/lib/layout/layout\";\nimport Editor from \"@monaco-editor/react\";\nimport Sider from \"antd/lib/layout/Sider\";\nimport React from \"react\";\nimport { CodeContext } from \"../../model/CodeContext\";\nimport CodeDisplay from \"./component/CodeDisplay\";\nimport Header from \"./component/Header\";\n\nconst { TabPane } = Tabs;\n\nconst { Link } = Typography;\n\nexport default function HomePage() {\n  const [height, setHeight] = React.useState(window.innerHeight);\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", () => {\n      setHeight(window.innerHeight);\n    });\n  }, []);\n\n  const {\n    setCode,\n    setTable,\n    code,\n    tableStructure,\n    result,\n    post,\n    postDB,\n    backend,\n  } = React.useContext(CodeContext);\n\n  return (\n    <Layout style={{ maxHeight: \"100vh\", overflow: \"hidden\", padding: 10 }}>\n      <Header />\n      <Content>\n        <Row style={{ height: \"80%\" }} gutter={[16, 10]}>\n          <Col span={8}>\n            <Card>\n              <Tabs defaultActiveKey=\"1\" onChange={() => {}}>\n                <TabPane tab=\"SQL Statement\" key=\"1\">\n                  <Editor\n                    height={height - 300}\n                    language=\"sql\"\n                    value={code}\n                    options={{ minimap: { enabled: false } }}\n                    onChange={(e) => {\n                      if (e) {\n                        setCode(e);\n                      }\n                    }}\n                  />\n                </TabPane>\n                <TabPane tab=\"Table structure\" key=\"2\">\n                  <Typography>\n                    <Link\n                      target=\"_blank\"\n                      href=\"https://github.com/sirily11/SECYAN-GEN/blob/master/examples/table_config.json\"\n                    >\n                      Example Table Structure\n                    </Link>\n                  </Typography>\n                  <Editor\n                    height={height - 300}\n                    value={tableStructure}\n                    language=\"json\"\n                    options={{ minimap: { enabled: false } }}\n                    onChange={(e) => {\n                      if (e) {\n                        setTable(e);\n                      }\n                    }}\n                  />\n                </TabPane>\n              </Tabs>\n              <Row style={{ justifyContent: \"flex-end\", marginTop: 10 }}>\n                <Button\n                  type=\"primary\"\n                  loading={isLoading}\n                  onClick={async () => {\n                    setIsLoading(true);\n                    if (code?.length === 0 || tableStructure?.length === 0) {\n                      window.alert(\"Invaild Input\");\n                      setIsLoading(false);\n                      return;\n                    }\n                    try {\n                      if (backend == \"python\") {\n                        await post();\n                      } else {\n                        await postDB();\n                      }\n                      notification.info({\n                        message: \"Code generated\",\n                      });\n                    } catch (err) {\n                      notification.error({\n                        message: \"Cannot generate code\",\n                        description: `${err?.response?.data}`,\n                        duration: 5,\n                      });\n                    } finally {\n                      setIsLoading(false);\n                    }\n                  }}\n                >\n                  Convert\n                </Button>\n              </Row>\n            </Card>\n          </Col>\n          <Col span={16}>{result && <CodeDisplay />}</Col>\n        </Row>\n      </Content>\n    </Layout>\n  );\n}\n","import React from 'react';\nimport 'antd/dist/antd.css'; // or 'antd/dist/antd.less'\nimport { CodeProvider } from './components/model/CodeContext';\nimport HomePage from './components/pages/home/HomePage';\n\nfunction App() {\n  return (\n    <CodeProvider>\n      <HomePage />\n    </CodeProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}